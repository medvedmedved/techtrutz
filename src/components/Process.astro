---
const steps = [
  {
    title: '1. Anfrage',
    text: 'Sie schildern Ihr Anliegen per Telefon oder E-Mail.',
    icon: 'mail',
    num: '01',
    titleKey: 'process.item1.title',
    textKey: 'process.item1.text'
  },
  {
    title: '2. Analyse',
    text: 'Wir prüfen den Bedarf und empfehlen die passende Lösung.',
    icon: 'scan',
    num: '02',
    titleKey: 'process.item2.title',
    textKey: 'process.item2.text'
  },
  {
    title: '3. Umsetzung',
    text: 'Einrichtung, Reparatur oder Optimierung erfolgt sauber und effizient.',
    icon: 'build',
    num: '03',
    titleKey: 'process.item3.title',
    textKey: 'process.item3.text'
  },
  {
    title: '4. Betreuung',
    text: 'Auf Wunsch übernehmen wir langfristigen Support und Wartung.',
    icon: 'shield',
    num: '04',
    titleKey: 'process.item4.title',
    textKey: 'process.item4.text'
  }
];
---

<section class="stack-panel z-40" aria-labelledby="process-heading">
  <div class="container-page stack-animate">
    <div class="card p-8 sm:p-12">
      <h2 id="process-heading" class="text-3xl font-bold sm:text-4xl" data-i18n="process.title">So läuft die Zusammenarbeit</h2>

      <!-- Desktop: horizontal timeline -->
      <div class="mt-10 hidden md:block">
        <!-- Connector line -->
        <div class="relative mb-6 flex items-center justify-between">
          <div class="absolute left-0 right-0 top-6 h-0.5 bg-gradient-to-r from-accent-200 via-accent-400 to-accent-200 opacity-60"></div>
          {
            steps.map((step) => (
              <div class="relative z-10 flex flex-col items-center" style="width: 25%">
                <div class="flex h-12 w-12 items-center justify-center rounded-full border-2 border-accent-200 bg-white shadow-glow">
                  <span class="text-sm font-black text-accent-700">{step.num}</span>
                </div>
              </div>
            ))
          }
        </div>
        <ol class="grid grid-cols-4 gap-4" aria-label="Ablauf">
          {
            steps.map((step) => (
              <li class="card p-5 text-center">
                <span class="mb-3 inline-flex h-10 w-10 items-center justify-center rounded-xl bg-ink-900 text-white">
                  {
                    step.icon === 'mail' && <svg viewBox="0 0 24 24" class="h-5 w-5" aria-hidden="true"><path fill="currentColor" d="M3 6h18v12H3zm2 2v.5l7 4 7-4V8l-7 4z"/></svg>
                  }
                  {
                    step.icon === 'scan' && <svg viewBox="0 0 24 24" class="h-5 w-5" aria-hidden="true"><path fill="currentColor" d="M4 4h6v2H6v4H4zm10 0h6v6h-2V6h-4zM4 14h2v4h4v2H4zm14 0h2v6h-6v-2h4z"/></svg>
                  }
                  {
                    step.icon === 'build' && <svg viewBox="0 0 24 24" class="h-5 w-5" aria-hidden="true"><path fill="currentColor" d="M22 7.2a6 6 0 01-8.2 5.5l-7 7L4 17l7-7A6 6 0 0118.8 1L15 4.8l2.2 2.2z"/></svg>
                  }
                  {
                    step.icon === 'shield' && <svg viewBox="0 0 24 24" class="h-5 w-5" aria-hidden="true"><path fill="currentColor" d="M12 2l8 4v6c0 5-3.4 9.7-8 11-4.6-1.3-8-6-8-11V6zm-1 10l-2-2-1.4 1.4L11 14.8l5.4-5.4L15 8z"/></svg>
                  }
                </span>
                <h3 class="text-base font-bold" data-i18n={step.titleKey}>{step.title}</h3>
                <p class="mt-1.5 text-sm leading-relaxed text-slate-600" data-i18n={step.textKey}>{step.text}</p>
              </li>
            ))
          }
        </ol>
      </div>

      <!-- Mobile: vertical timeline -->
      <ol class="relative mt-8 flex flex-col gap-0 md:hidden" aria-label="Ablauf">
        <div class="absolute bottom-0 left-5 top-5 w-0.5 bg-gradient-to-b from-accent-400 via-accent-200 to-transparent"></div>
        {
          steps.map((step, i) => (
            <li class="relative flex gap-4 pb-8 last:pb-0">
              <div class="relative z-10 mt-0.5 flex h-10 w-10 shrink-0 items-center justify-center rounded-full border-2 border-accent-200 bg-white shadow-sm">
                <span class="text-xs font-black text-accent-700">{step.num}</span>
              </div>
              <div class="card flex-1 p-4">
                <span class="mb-2 inline-flex h-8 w-8 items-center justify-center rounded-lg bg-ink-900 text-white">
                  {
                    step.icon === 'mail' && <svg viewBox="0 0 24 24" class="h-4 w-4" aria-hidden="true"><path fill="currentColor" d="M3 6h18v12H3zm2 2v.5l7 4 7-4V8l-7 4z"/></svg>
                  }
                  {
                    step.icon === 'scan' && <svg viewBox="0 0 24 24" class="h-4 w-4" aria-hidden="true"><path fill="currentColor" d="M4 4h6v2H6v4H4zm10 0h6v6h-2V6h-4zM4 14h2v4h4v2H4zm14 0h2v6h-6v-2h4z"/></svg>
                  }
                  {
                    step.icon === 'build' && <svg viewBox="0 0 24 24" class="h-4 w-4" aria-hidden="true"><path fill="currentColor" d="M22 7.2a6 6 0 01-8.2 5.5l-7 7L4 17l7-7A6 6 0 0118.8 1L15 4.8l2.2 2.2z"/></svg>
                  }
                  {
                    step.icon === 'shield' && <svg viewBox="0 0 24 24" class="h-4 w-4" aria-hidden="true"><path fill="currentColor" d="M12 2l8 4v6c0 5-3.4 9.7-8 11-4.6-1.3-8-6-8-11V6zm-1 10l-2-2-1.4 1.4L11 14.8l5.4-5.4L15 8z"/></svg>
                  }
                </span>
                <h3 class="font-bold" data-i18n={step.titleKey}>{step.title}</h3>
                <p class="mt-1 text-sm text-slate-600" data-i18n={step.textKey}>{step.text}</p>
              </div>
            </li>
          ))
        }
      </ol>
    </div>
  </div>
</section>
